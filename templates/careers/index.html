{% extends (craft.app.request.isAjax and not craft.app.request.isLivePreview) ? '_ajax-layout' : '_layout' %}

{% set title = entry.title %}
{% if entry.seoTitle %}{% set seoTitle = entry.seoTitle %}{% endif %}
{% if entry.seoDescription %}{% set seoDescription = entry.seoDescription %}{% endif %}
{% set bodyClass = 'with-blobs' %}

{% block content %}

  {% include 'partials/_text-header' %}

  {% include 'partials/_staggered-image-header' with { header: entry.staggeredImageHeader } %}

  {% include 'blocks/_page-blocks' %}

  <div class="block-wrap">
    <div class="-inner">

      <div class="block-section-header">
        <h3>Open Positions</h3>
      </div>

      {% if entry.positions|length %}
        <div class="current-positions">
        {% for position in entry.positions.all() %}
          <div class="position accordion">
            <div class="block-text user-content halfWidth">
              <div class="-inner">
                <h2>{{ position.title }}</h2>
              </div>
            </div>
            <div class="block-text user-content halfWidth">
              <div class="-inner">
                <div class="intro">
                  {{ position.positionInfo.intro }}
                  <a href="#" class="expand">
                    <svg class="icon icon-plus" aria-hidden="true"><use xlink:href="#icon-plus"/></svg>
                  </a>
                  <a href="#" class="collapse">
                    <svg class="icon icon-minus" aria-hidden="true"><use xlink:href="#icon-minus"/></svg>
                  </a>
                </div>
                <div class="description">
                  {{ position.positionInfo.description }}
                </div>
              </div>
            </div>
          </div>
        {% endfor %}
        </div>
      {% endif %}

      <div class="block-text user-content fullWidthPaddedLeft">
        <div class="-inner">
          {% if entry.positions|length == 0 %}
            <p>Nothing at the moment. ¯\_(ツ)_/¯</p>
          {% endif %}

          {{ entry.positionsOutro }}
        </div>
      </div>

      <div class="block-section-header">
        <h3>Apprenticeship Program</h3>
      </div>

      <div class="block-text user-content fullWidthPaddedLeft">
        <div class="-inner">
          {{ entry.apprenticeshipProgram.intro }}
        </div>
      </div>

      <div class="block-text user-content fullWidthPaddedRight">
        <div class="-inner">
          {{ entry.apprenticeshipProgram.body }}
        </div>
      </div>

    </div>
  </div><!-- /.block-wrap -->

{% endblock %}
