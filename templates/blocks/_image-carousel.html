<div class="block-carousel -reveal">
  <div class="flickity js-cursor">
    {% for image in block.images %}
      {% set embeddedAsset = craft.embeddedAssets.get(image) %}
      {% if embeddedAsset %}
        {# Custom vimeo handling #}
        {% if embeddedAsset.url matches '/vimeo\.com/' %}
          <div class="embedded-asset vimeo-block{{ block.backgroundVideo ? ' background-video' : '' }}" data-url="{{ embeddedAsset.url }}" data-width="{{ embeddedAsset.width }}" data-height="{{ embeddedAsset.height }}">
            <img class="lazyload" data-src="{{ embeddedAsset.images[0].url }}">
          </div>
        {% else %}
          {{ embeddedAsset.html }}
        {% endif %}
      {% else %}
        {% set treatedImage = craft.imager.transformImage(image, { mode: 'fit', width: 1800, height: 900 }) %}
        {% set orientation = image.getWidth() > image.getHeight() ? 'landscape' : 'portrait' %}
        <div class="slide {{ orientation }}">
          {%- if block.imageLinkUrl %}<a href="{{ block.imageLinkUrl }}" target="_blank" rel="noopener">{% endif -%}
            <img src="{{ treatedImage.getUrl() }}" alt="{{ image.title }}">
          {%- if block.imageLinkUrl %}</a>{% endif -%}
        </div>
      {% endif %}
    {% endfor %}
  </div>
</div>
